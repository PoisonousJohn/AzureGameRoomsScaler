{
	"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"location" : {
			"type": "string"
		},
		"funcname": {
			"type": "string"
		},
		"hostingPlanName": {
			"type": "string"
		}
	},
	"resources": [
		{
            "apiVersion": "2016-03-01",
            "name": "[parameters('funcname')]",
            "type": "Microsoft.Web/Sites",
            "properties": {
                "name": "[parameters('funcname')]",
                "siteConfig": {

                },
                "clientAffinityEnabled": false,
                "serverFarmId": "[concat('/subscriptions/', subscription().subscriptionId,'/resourcegroups/', resourceGroup().name, '/providers/Microsoft.Web/serverfarms/', parameters('hostingPlanName'))]",
                "hostingEnvironment": ""
            },
            "resources": [
                {
                    "apiVersion": "2015-08-01",
                    "name": "appsettings",
                    "type": "config",
                    "dependsOn": [
                      "[resourceId(subscription().subscriptionId, resourceGroup().name, 'Microsoft.Web/Sites', parameters('funcname'))]"
                    ],
                    "properties": {
						"REPORT_GAMEROOMS_URL": "[listsecrets(resourceId('Microsoft.Web/sites/functions', parameters('funcname'), 'ReportGameRooms'),'2015-08-01').trigger_url]"

                    }
                 }
			],
			"location": "[parameters('location')]",
            "kind": "functionapp"
        }
	]
}